(()=>{var e={};e.id=5961,e.ids=[5961,2888],e.modules={964:e=>{e.exports={pageContainer:"AchievementsPage_pageContainer__GgY6V",header:"AchievementsPage_header__jK5G6",title:"AchievementsPage_title__IjB24",backButton:"AchievementsPage_backButton__ookNX",mainBox:"AchievementsPage_mainBox__Ibz7a",achievementsGrid:"AchievementsPage_achievementsGrid__qXIKv",achievementSlot:"AchievementsPage_achievementSlot__LO6S6",completed:"AchievementsPage_completed__tSq7l",claimed:"AchievementsPage_claimed__y_muK",icon:"AchievementsPage_icon__MAJhK",name:"AchievementsPage_name__4_x25",description:"AchievementsPage_description__mFdFF",reward:"AchievementsPage_reward__SB_Mp",footer:"AchievementsPage_footer__FhFve",claimButton:"AchievementsPage_claimButton__YogNX"}},9974:(e,a,i)=>{"use strict";i.r(a),i.d(a,{config:()=>w,default:()=>x,getServerSideProps:()=>f,getStaticPaths:()=>P,getStaticProps:()=>A,reportWebVitals:()=>N,routeModule:()=>q,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>C,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>S});var t={};i.r(t),i.d(t,{default:()=>AchievementsPage});var n=i(7093),s=i(5244),c=i(1323),o=i(4003),r=i(9597),l=i(997),d=i(6689),m=i(1664),p=i.n(m),h=i(9445),_=i.n(h),g=i(964),v=i.n(g);let u=[{id:"level_5",name:"Primeiro Diagn\xf3stico",description:"Alcance o N\xedvel 5 em qualquer sala.",reward:10,icon:"/img/icons/trophy_bronze.png"},{id:"level_18",name:"Residente Dedicado",description:"Alcance o N\xedvel 18.",reward:10,icon:"/img/icons/trophy_bronze.png"},{id:"level_27",name:"T\xe9cnico Especializado",description:"Alcance o N\xedvel 27.",reward:10,icon:"/img/icons/trophy_bronze.png"},{id:"level_39",name:"Chefe de Ala",description:"Alcance o N\xedvel 39.",reward:10,icon:"/img/icons/trophy_bronze.png"},{id:"level_45",name:"Coordenador de Protocolos",description:"Alcance o N\xedvel 45.",reward:10,icon:"/img/icons/trophy_bronze.png"},{id:"level_60",name:"Diretor de Departamento",description:"Alcance o N\xedvel 60.",reward:100,icon:"/img/icons/trophy_silver.png"},{id:"level_85",name:"Mestre da Log\xedstica M\xe9dica",description:"Alcance o N\xedvel 85.",reward:100,icon:"/img/icons/trophy_silver.png"},{id:"level_97",name:"Pioneiro da Pesquisa",description:"Alcance o N\xedvel 97.",reward:100,icon:"/img/icons/trophy_silver.png"},{id:"level_110",name:"Vision\xe1rio da Cura",description:"Alcance o N\xedvel 110.",reward:100,icon:"/img/icons/trophy_silver.png"},{id:"level_140",name:"Arquiteto da Sa\xfade",description:"Alcance o N\xedvel 140.",reward:1e3,icon:"/img/icons/trophy_gold.png"},{id:"level_183",name:"\xcdcone do Renascimento",description:"Alcance o N\xedvel 183.",reward:1e3,icon:"/img/icons/trophy_gold.png"},{id:"level_201",name:"Salvador de Lumina",description:"Alcance o N\xedvel 201.",reward:1e3,icon:"/img/icons/trophy_gold.png"},{id:"level_211",name:"Lenda Viva",description:"Alcance o N\xedvel 211.",reward:1e3,icon:"/img/icons/trophy_gold.png"},{id:"level_223",name:"Tit\xe3 da Medicina",description:"Alcance o N\xedvel 223.",reward:1e3,icon:"/img/icons/trophy_gold.png"},{id:"level_237",name:"Esperan\xe7a Encarnada",description:"Alcance o N\xedvel 237.",reward:1e3,icon:"/img/icons/trophy_gold.png"},{id:"level_246",name:"Quase um Semideus",description:"Alcance o N\xedvel 246.",reward:1e3,icon:"/img/icons/trophy_gold.png"},{id:"level_250",name:"O Pin\xe1culo da Cura",description:"Alcance o N\xedvel M\xe1ximo (250).",reward:5e3,specialReward:"NFT Lend\xe1rio",icon:"/img/icons/trophy_legendary.png"}];function AchievementsPage(){let[e,a]=(0,d.useState)([]),[i,t]=(0,d.useState)(0),[n,s]=(0,d.useState)(null),[c,o]=(0,d.useState)(!0),[r,m]=(0,d.useState)(!1),[h,g]=(0,d.useState)({message:"",type:""}),showNotification=(e,a="success",i=4e3)=>{g({message:e,type:a}),setTimeout(()=>g({message:"",type:""}),i)};(0,d.useEffect)(()=>{let e=localStorage.getItem("user_wallet");e?s(e):o(!1)},[]);let fetchAchievementsData=async()=>{if(n){o(!0);try{let e=await fetch(`/api/achievements/status?wallet=${n}`);if(!e.ok)throw Error("Falha ao buscar dados.");let i=await e.json(),s=0,c=u.map(e=>{let a=i.completedAchievements.includes(e.id),t=i.claimedAchievements.includes(e.id);return a&&!t&&s++,{...e,isCompleted:a,isClaimed:t}});a(c),t(s)}catch(e){console.error("Falha ao buscar dados de conquistas",e)}finally{o(!1)}}};(0,d.useEffect)(()=>{fetchAchievementsData()},[n]);let handleClaimAll=async()=>{if(n&&!r&&0!==i){m(!0);try{let e=await fetch("/api/achievements/claim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:n})}),a=await e.json();if(!e.ok)throw Error(a.error);showNotification(a.message,"success"),fetchAchievementsData()}catch(e){showNotification(e.message,"error")}finally{m(!1)}}};return(0,l.jsxs)("div",{className:_().canvas,children:[h.message&&l.jsx("div",{className:`${_().notification} ${_()[h.type]}`,children:h.message}),(0,l.jsxs)("div",{className:v().pageContainer,children:[(0,l.jsxs)("header",{className:v().header,children:[l.jsx("h1",{className:v().title,children:"Conquistas"}),l.jsx(p(),{href:"/",passHref:!0,children:l.jsx("button",{className:v().backButton,children:"Voltar ao Jogo"})})]}),l.jsx("main",{className:v().mainBox,children:c?l.jsx("p",{style:{textAlign:"center",color:"white"},children:"Carregando suas conquistas..."}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("div",{className:v().achievementsGrid,children:e.map(e=>(0,l.jsxs)("div",{className:`${v().achievementSlot} ${e.isClaimed?v().claimed:e.isCompleted?v().completed:""}`,children:[l.jsx("img",{src:e.icon,alt:"Conquista",className:v().icon}),l.jsx("h4",{className:v().name,children:e.name}),l.jsx("p",{className:v().description,children:e.description}),(0,l.jsxs)("p",{className:v().reward,children:["Recompensa: ",e.reward," VIDA"]})]},e.id))}),l.jsx("footer",{className:v().footer,children:l.jsx("button",{onClick:handleClaimAll,disabled:r||0===i,className:v().claimButton,children:r?"Coletando...":`Recolher Tudo (${i})`})})]})})]})]})}let x=(0,c.l)(t,"default"),A=(0,c.l)(t,"getStaticProps"),P=(0,c.l)(t,"getStaticPaths"),f=(0,c.l)(t,"getServerSideProps"),w=(0,c.l)(t,"config"),N=(0,c.l)(t,"reportWebVitals"),S=(0,c.l)(t,"unstable_getStaticProps"),y=(0,c.l)(t,"unstable_getStaticPaths"),b=(0,c.l)(t,"unstable_getStaticParams"),j=(0,c.l)(t,"unstable_getServerProps"),C=(0,c.l)(t,"unstable_getServerSideProps"),q=new n.PagesRouteModule({definition:{kind:s.x.PAGES,page:"/achievements",pathname:"/achievements",bundlePath:"",filename:""},components:{App:r.default,Document:o.default},userland:t})},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},1017:e=>{"use strict";e.exports=require("path")}};var a=require("../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),i=a.X(0,[6859,8450,8760,5588,1664,9597,6710],()=>__webpack_exec__(9974));module.exports=i})();