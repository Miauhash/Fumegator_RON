"use strict";(()=>{var e={};e.id=6346,e.ids=[6346],e.modules={3524:e=>{e.exports=require("@prisma/client")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7281:(e,t,s)=>{s.r(t),s.d(t,{config:()=>d,default:()=>l,routeModule:()=>u});var r={};s.r(r),s.d(r,{default:()=>handler});var a=s(1802),i=s(7153),o=s(6249),n=s(7864);async function handler(e,t){if("POST"!==e.method)return t.status(405).json({success:!1,error:"Method not allowed"});let{wallet:s,nftKey:r,days:a}=e.body;if(!s||!r||!a)return t.status(400).json({success:!1,error:"Dados insuficientes."});try{let e=await n.Z.gameState.findUnique({where:{wallet:s}});if(!e)throw Error("Usu\xe1rio n\xe3o encontrado.");let i=e.state,o=!1;for(let e in i.selectedMeta)if(i.selectedMeta[e]?.key===r){let t=i.selectedMeta[e],s=864e5*a;t.assignedAt-=s,o=!0;break}if(!o)throw Error("O NFT alvo n\xe3o est\xe1 atualmente em uso.");await n.Z.gameState.update({where:{wallet:s},data:{state:i}}),t.status(200).json({success:!0,message:"NFT life extended successfully."})}catch(e){console.error("Error extending NFT life:",e),t.status(400).json({success:!1,error:e.message})}}let l=(0,o.l)(r,"default"),d=(0,o.l)(r,"config"),u=new a.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/items/extend-nft-life",pathname:"/api/items/extend-nft-life",bundlePath:"",filename:""},userland:r})},7864:(e,t,s)=>{let r;s.d(t,{Z:()=>i});var a=s(3524);console.log("INICIALIZANDO PRISMA CLIENT. CONECTANDO AO BANCO DE DADOS:",process.env.DATABASE_URL),global.prisma||(global.prisma=new a.PrismaClient),r=global.prisma;let i=r}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[4222],()=>__webpack_exec__(7281));module.exports=s})();