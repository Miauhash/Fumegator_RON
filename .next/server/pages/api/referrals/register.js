"use strict";(()=>{var e={};e.id=5135,e.ids=[5135],e.modules={3524:e=>{e.exports=require("@prisma/client")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1005:(e,r,a)=>{a.r(r),a.d(r,{config:()=>o,default:()=>d,routeModule:()=>u});var s={};a.r(s),a.d(s,{default:()=>handler});var t=a(1802),i=a(7153),l=a(6249),n=a(7864);async function handler(e,r){if("POST"!==e.method)return r.status(405).end();let{referrer:a,newUser:s}=e.body;if(!a||!s||a===s)return r.status(400).json({error:"Dados de refer\xeancia inv\xe1lidos"});try{await n.Z.referral.create({data:{referrer:a,referred:s}}),r.status(200).json({success:!0})}catch(e){r.status(200).json({success:!1,message:"Indica\xe7\xe3o j\xe1 registrada."})}}let d=(0,l.l)(s,"default"),o=(0,l.l)(s,"config"),u=new t.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/referrals/register",pathname:"/api/referrals/register",bundlePath:"",filename:""},userland:s})},7864:(e,r,a)=>{let s;a.d(r,{Z:()=>i});var t=a(3524);console.log("INICIALIZANDO PRISMA CLIENT. CONECTANDO AO BANCO DE DADOS:",process.env.DATABASE_URL),global.prisma||(global.prisma=new t.PrismaClient),s=global.prisma;let i=s}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[4222],()=>__webpack_exec__(1005));module.exports=a})();