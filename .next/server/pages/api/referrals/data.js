"use strict";(()=>{var e={};e.id=2731,e.ids=[2731],e.modules={3524:e=>{e.exports=require("@prisma/client")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9819:(e,r,a)=>{a.r(r),a.d(r,{config:()=>d,default:()=>n,routeModule:()=>u});var t={};a.r(t),a.d(t,{default:()=>handler});var o=a(1802),s=a(7153),l=a(6249),i=a(7864);async function handler(e,r){let{wallet:a}=e.query;if(!a)return r.status(400).json({error:"Wallet \xe9 obrigat\xf3ria"});try{let e=await i.Z.referral.count({where:{referrer:a}}),t=await i.Z.referral.count({where:{referrer:a,claimed:!1}});r.status(200).json({count:e,rewardsToClaim:t})}catch(e){console.error("Erro ao buscar dados de refer\xeancia:",e),r.status(500).json({error:"Erro no servidor"})}}let n=(0,l.l)(t,"default"),d=(0,l.l)(t,"config"),u=new o.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/referrals/data",pathname:"/api/referrals/data",bundlePath:"",filename:""},userland:t})},7864:(e,r,a)=>{let t;a.d(r,{Z:()=>s});var o=a(3524);console.log("INICIALIZANDO PRISMA CLIENT. CONECTANDO AO BANCO DE DADOS:",process.env.DATABASE_URL),global.prisma||(global.prisma=new o.PrismaClient),t=global.prisma;let s=t}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[4222],()=>__webpack_exec__(9819));module.exports=a})();