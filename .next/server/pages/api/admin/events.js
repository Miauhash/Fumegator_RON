"use strict";(()=>{var e={};e.id=7236,e.ids=[7236],e.modules={3524:e=>{e.exports=require("@prisma/client")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5031:(e,a,t)=>{t.r(a),t.d(a,{config:()=>d,default:()=>l,routeModule:()=>u});var s={};t.r(s),t.d(s,{default:()=>handler});var r=t(1802),o=t(7153),i=t(6249),n=t(7864);async function handler(e,a){if("Bearer 9cb542e9A"!==e.headers.authorization)return a.status(401).json({message:"N\xe3o autorizado."});if("POST"===e.method){let{name:t,description:s,targetToken:r,goalAmount:o,endsAt:i,rewardItemId:l,rewardAmount:d}=e.body;if(!t||!s||!r||!o||!i||!l||!d)return a.status(400).json({message:"Todos os campos do evento s\xe3o obrigat\xf3rios."});await n.Z.globalEvent.updateMany({where:{isActive:!0},data:{isActive:!1}});let u=await n.Z.globalEvent.create({data:{name:t,description:s,targetToken:r,rewardItemId:l,goalAmount:parseFloat(o),rewardAmount:parseFloat(d),endsAt:new Date(i),isActive:!0,currentAmount:0}});return a.status(201).json({message:"Evento criado com sucesso!",event:u})}}let l=(0,i.l)(s,"default"),d=(0,i.l)(s,"config"),u=new r.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/admin/events",pathname:"/api/admin/events",bundlePath:"",filename:""},userland:s})},7864:(e,a,t)=>{let s;t.d(a,{Z:()=>o});var r=t(3524);console.log("INICIALIZANDO PRISMA CLIENT. CONECTANDO AO BANCO DE DADOS:",process.env.DATABASE_URL),global.prisma||(global.prisma=new r.PrismaClient),s=global.prisma;let o=s}};var a=require("../../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[4222],()=>__webpack_exec__(5031));module.exports=t})();