"use strict";(()=>{var e={};e.id=4621,e.ids=[4621],e.modules={3524:e=>{e.exports=require("@prisma/client")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3138:(e,a,t)=>{t.r(a),t.d(a,{config:()=>d,default:()=>l,routeModule:()=>c});var r={};t.r(r),t.d(r,{default:()=>handler});var s=t(1802),i=t(7153),n=t(6249),o=t(7864);async function handler(e,a){if("Bearer 9cb542e9A"!==e.headers.authorization)return a.status(401).json({message:"N\xe3o autorizado."});try{let e=await o.Z.gameState.count(),t=await o.Z.globalEvent.findFirst({where:{isActive:!0}}),r=await o.Z.marketListing.count({where:{isActive:!0}}),s=await o.Z.gameState.findMany({select:{state:!0}}),i={INSULINE:0,ZOLGENSMA:0,LUXUTURNA:0,ZYNTEGLO:0,VIDA:0};s.forEach(e=>{let a=e.state?.balances;if(a)for(let e in i)a[e]&&(i[e]+=Number(a[e]))}),a.status(200).json({totalPlayers:e,activeEventName:t?.name||"Nenhum",totalListings:r,tokenTotals:i})}catch(e){console.error("Error fetching admin stats:",e),a.status(500).json({message:"Error fetching admin stats",error:e.message})}}let l=(0,n.l)(r,"default"),d=(0,n.l)(r,"config"),c=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/admin/stats",pathname:"/api/admin/stats",bundlePath:"",filename:""},userland:r})},7864:(e,a,t)=>{let r;t.d(a,{Z:()=>i});var s=t(3524);console.log("INICIALIZANDO PRISMA CLIENT. CONECTANDO AO BANCO DE DADOS:",process.env.DATABASE_URL),global.prisma||(global.prisma=new s.PrismaClient),r=global.prisma;let i=r}};var a=require("../../../webpack-api-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[4222],()=>__webpack_exec__(3138));module.exports=t})();