(()=>{var e={};e.id=7695,e.ids=[7695,2888,660],e.modules={3748:e=>{e.exports={canvas:"EventsPage_canvas__G_Udu",container:"EventsPage_container__xQufJ",header:"EventsPage_header__yHemX",title:"EventsPage_title__g6noe",backButton:"EventsPage_backButton__J8Jcp",card:"EventsPage_card__wma3E",eventGrid:"EventsPage_eventGrid__Irwug",eventInfoCard:"EventsPage_eventInfoCard__xJCf4",progressCard:"EventsPage_progressCard__5Cj7J",contributionCard:"EventsPage_contributionCard__jozJi",description:"EventsPage_description__uuNBb",rewardInfo:"EventsPage_rewardInfo__Ufir_",progressContainer:"EventsPage_progressContainer__criZq",progressBar:"EventsPage_progressBar__94Ooh",progressText:"EventsPage_progressText__jIkQI",balanceInfo:"EventsPage_balanceInfo__lqIaH",form:"EventsPage_form__ZmmLm",input:"EventsPage_input__RWsXY",button:"EventsPage_button__zx2kA"}},2649:(e,a,t)=>{"use strict";t.r(a),t.d(a,{config:()=>S,default:()=>b,getServerSideProps:()=>P,getStaticPaths:()=>f,getStaticProps:()=>j,reportWebVitals:()=>N,routeModule:()=>I,unstable_getServerProps:()=>k,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>C,unstable_getStaticPaths:()=>w,unstable_getStaticProps:()=>E});var s={};t.r(s),t.d(s,{default:()=>EventsPage});var r=t(7093),n=t(5244),i=t(1323),o=t(4003),c=t(9597),l=t(997),d=t(6689),u=t(1664),p=t.n(u),g=t(968),m=t.n(g),h=t(9142),x=t(1178),_=t(3748),v=t.n(_);function EventsPage(){let[e,a]=(0,d.useState)(null),{userAddress:t}=(0,x.U)(),[s,r]=(0,d.useState)({}),[n,i]=(0,d.useState)(""),[o,c]=(0,d.useState)(!0),[u,g]=(0,d.useState)(!1),[_,b]=(0,d.useState)({message:"",type:""}),showFeedback=(e,a,t=4e3)=>{b({message:e,type:a}),setTimeout(()=>b({message:"",type:""}),t)},fetchData=async e=>{c(!0);try{let t=await fetch("/api/events/getActive");if(t.ok){let e=await t.json();a(e)}if(e){let a=await (0,h.u)(e);a?.balances&&r(a.balances)}}catch(e){showFeedback("Falha ao carregar dados do evento.","error")}finally{c(!1)}};(0,d.useEffect)(()=>{t?fetchData(t):c(!1)},[t]);let handleContribute=async a=>{a.preventDefault();let s=parseFloat(n);if(isNaN(s)||s<=0)return showFeedback("Por favor, insira um valor v\xe1lido.","error");g(!0);try{let a=await fetch("/api/events/contribute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:t,eventId:e.id,amount:s})}),r=await a.json();if(!a.ok)throw Error(r.message);showFeedback("Obrigado pela sua contribui\xe7\xe3o!","success"),i(""),fetchData(t)}catch(e){showFeedback(e.message,"error")}finally{g(!1)}},j=e?e.currentAmount/e.goalAmount*100:0,f=e&&s[e.targetToken]||0;return(0,l.jsxs)("div",{className:v().canvas,children:[l.jsx(m(),{children:l.jsx("title",{children:"Eventos Globais - Hospital Fumegator"})}),(0,l.jsxs)("div",{className:v().container,children:[(0,l.jsxs)("header",{className:v().header,children:[l.jsx("h1",{className:v().title,children:"Eventos Globais"}),(0,l.jsxs)(p(),{href:"/game",passHref:!0,children:[" ",l.jsx("button",{className:v().backButton,children:"Exit"})]})]}),o?l.jsx("p",{className:v().centerText,children:"Carregando eventos..."}):e?(0,l.jsxs)("div",{className:v().eventGrid,children:[(0,l.jsxs)("div",{className:`${v().card} ${v().eventInfoCard}`,children:[l.jsx("h2",{children:e.name}),l.jsx("p",{className:v().description,children:e.description}),(0,l.jsxs)("div",{className:v().rewardInfo,children:[l.jsx("strong",{children:"Recompensa Global:"}),(0,l.jsxs)("span",{children:[e.rewardAmount,"x ",e.rewardItemId]})]})]}),(0,l.jsxs)("div",{className:`${v().card} ${v().progressCard}`,children:[l.jsx("h3",{children:"Progresso Global"}),(0,l.jsxs)("div",{className:v().progressContainer,children:[l.jsx("div",{className:v().progressBar,style:{width:`${Math.min(j,100)}%`}}),(0,l.jsxs)("span",{className:v().progressText,children:[e.currentAmount.toLocaleString()," / ",e.goalAmount.toLocaleString()]})]}),(0,l.jsxs)("p",{className:v().progressLabel,children:[j.toFixed(2),"% Conclu\xeddo"]})]}),(0,l.jsxs)("div",{className:`${v().card} ${v().contributionCard}`,children:[l.jsx("h3",{children:"Sua Contribui\xe7\xe3o"}),(0,l.jsxs)("p",{children:["Ajude a alcan\xe7ar a meta contribuindo com ",l.jsx("strong",{children:e.targetToken}),"!"]}),(0,l.jsxs)("div",{className:v().balanceInfo,children:["Seu Saldo: ",f.toFixed(4)," ",e.targetToken]}),(0,l.jsxs)("form",{onSubmit:handleContribute,className:v().form,children:[l.jsx("input",{type:"number",step:"any",min:"0",value:n,onChange:e=>i(e.target.value),placeholder:"Quantidade",className:v().input,disabled:!t||u||j>=100}),l.jsx("button",{type:"submit",className:v().button,disabled:!t||u||j>=100,children:u?"Enviando...":"Contribuir"})]}),!t&&l.jsx("p",{className:v().warning,children:"Conecte sua carteira para contribuir."}),j>=100&&l.jsx("p",{className:v().success,children:"Meta alcan\xe7ada! Recompensas em breve."})]})]}):(0,l.jsxs)("div",{className:v().card,children:[l.jsx("h2",{children:"Pandemia Global"}),l.jsx("p",{children:"N\xe3o h\xe1 nenhuma pandemia ativa no momento. O mundo est\xe1 em paz... por enquanto."})]})]}),_.message&&l.jsx("div",{className:`${v().notification} ${v()[_.type]}`,children:_.message})]})}let b=(0,i.l)(s,"default"),j=(0,i.l)(s,"getStaticProps"),f=(0,i.l)(s,"getStaticPaths"),P=(0,i.l)(s,"getServerSideProps"),S=(0,i.l)(s,"config"),N=(0,i.l)(s,"reportWebVitals"),E=(0,i.l)(s,"unstable_getStaticProps"),w=(0,i.l)(s,"unstable_getStaticPaths"),C=(0,i.l)(s,"unstable_getStaticParams"),k=(0,i.l)(s,"unstable_getServerProps"),y=(0,i.l)(s,"unstable_getServerSideProps"),I=new r.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/events",pathname:"/events",bundlePath:"",filename:""},components:{App:c.default,Document:o.default},userland:s})},4003:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>Document});var s=t(997),r=t(6859);function Document(){return(0,s.jsxs)(r.Html,{lang:"pt-BR",children:[s.jsx(r.Head,{children:s.jsx("meta",{name:"google-adsense-account",content:"ca-pub-8822559687614116"})}),(0,s.jsxs)("body",{children:[s.jsx(r.Main,{}),s.jsx(r.NextScript,{})]})]})}},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},1017:e=>{"use strict";e.exports=require("path")}};var a=require("../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[6859,8450,8760,5588,1664,9597,9142],()=>__webpack_exec__(2649));module.exports=t})();