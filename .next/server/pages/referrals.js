"use strict";(()=>{var e={};e.id=8217,e.ids=[8217,2888],e.modules={2566:(e,t,a)=>{a.r(t),a.d(t,{config:()=>h,default:()=>g,getServerSideProps:()=>f,getStaticPaths:()=>m,getStaticProps:()=>x,reportWebVitals:()=>S,routeModule:()=>P,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>y});var r={};a.r(r),a.d(r,{default:()=>ReferralsPage});var s=a(7093),i=a(5244),o=a(1323),l=a(4003),n=a(9597),c=a(997),d=a(6689),p=a(9445),u=a.n(p);function ReferralsPage(){let[e,t]=(0,d.useState)({count:0,rewardsToClaim:0}),[a,r]=(0,d.useState)(null),[s,i]=(0,d.useState)(!0),[o,l]=(0,d.useState)(!1),[n,p]=(0,d.useState)({message:"",type:""}),showNotification=(e,t="success",a=4e3)=>{p({message:e,type:t}),setTimeout(()=>p({message:"",type:""}),a)};(0,d.useEffect)(()=>{let e=localStorage.getItem("user_wallet");e?r(e):i(!1)},[]);let fetchReferralData=async()=>{if(a){i(!0);try{let e=await fetch(`/api/referrals/data?wallet=${a}`);if(!e.ok)throw Error("Falha ao buscar dados.");let r=await e.json();t(r)}catch(e){console.error("Falha ao buscar dados de refer\xeancia",e)}finally{i(!1)}}};(0,d.useEffect)(()=>{fetchReferralData()},[a]);let handleClaim=async()=>{if(a&&!o){l(!0);try{let e=await fetch("/api/referrals/claim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:a})}),t=await e.json();if(!e.ok)throw Error(t.error);showNotification(t.message,"success"),fetchReferralData()}catch(e){showNotification(e.message,"error")}finally{l(!1)}}},g=a?`${window.location.origin}/?ref=${a}`:"Conecte sua carteira para ver seu link";return(0,c.jsxs)("div",{className:u().canvas,children:[n.message&&c.jsx("div",{className:`${u().notification} ${u()[n.type]}`,children:n.message}),(0,c.jsxs)("div",{style:{color:"black",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"2rem",margin:"auto",maxWidth:"800px",borderRadius:"8px",fontFamily:"'Poppins', sans-serif"},children:[c.jsx("a",{href:"/",style:{textDecoration:"none",color:"#0070f3"},children:"← Voltar ao Jogo"}),c.jsx("h1",{style:{textAlign:"center",marginTop:"1rem"},children:"Sistema de Refer\xeancias"}),c.jsx("p",{style:{textAlign:"center",fontSize:"1.1rem"},children:"Convide seus amigos e ganhe 1 hora de acelera\xe7\xe3o de tempo para cada indicado que come\xe7ar a jogar!"}),c.jsx("h3",{style:{marginTop:"2rem"},children:"Seu Link de Convite \xdanico"}),(0,c.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[c.jsx("input",{type:"text",value:g,readOnly:!0,style:{width:"100%",padding:"10px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#eee"}}),c.jsx("button",{onClick:()=>navigator.clipboard.writeText(g),style:{padding:"10px 20px",cursor:"pointer"},children:"Copiar"})]}),c.jsx("hr",{style:{margin:"2rem 0"}}),c.jsx("h2",{style:{textAlign:"center"},children:"Suas Recompensas"}),s?c.jsx("p",{style:{textAlign:"center"},children:"Carregando seus dados..."}):(0,c.jsxs)("div",{style:{textAlign:"center"},children:[(0,c.jsxs)("p",{style:{fontSize:"1.2rem"},children:[c.jsx("strong",{children:"Amigos Indicados:"})," ",e.count]}),(0,c.jsxs)("p",{style:{fontSize:"1.2rem"},children:[c.jsx("strong",{children:"Acelera\xe7\xf5es para Coletar:"})," ",e.rewardsToClaim," hora(s)"]}),c.jsx("button",{onClick:handleClaim,disabled:0===e.rewardsToClaim||o,style:{padding:"15px 30px",fontSize:"1.2rem",cursor:"pointer",marginTop:"1rem"},children:o?"Coletando...":`Coletar ${e.rewardsToClaim} Recompensa(s)`})]})]})]})}let g=(0,o.l)(r,"default"),x=(0,o.l)(r,"getStaticProps"),m=(0,o.l)(r,"getStaticPaths"),f=(0,o.l)(r,"getServerSideProps"),h=(0,o.l)(r,"config"),S=(0,o.l)(r,"reportWebVitals"),y=(0,o.l)(r,"unstable_getStaticProps"),b=(0,o.l)(r,"unstable_getStaticPaths"),j=(0,o.l)(r,"unstable_getStaticParams"),w=(0,o.l)(r,"unstable_getServerProps"),v=(0,o.l)(r,"unstable_getServerSideProps"),P=new s.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/referrals",pathname:"/referrals",bundlePath:"",filename:""},components:{App:n.default,Document:l.default},userland:r})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[6859,8450,9597,6710],()=>__webpack_exec__(2566));module.exports=a})();